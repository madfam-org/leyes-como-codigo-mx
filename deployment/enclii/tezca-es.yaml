service: tezca-es
image: elasticsearch:7.17.9
port: 9200
replicas:
  min: 1
  max: 1
resources:
  requests:
    memory: 2Gi
    cpu: 500m
  limits:
    memory: 4Gi
    cpu: 2000m
storage:
  size: 50Gi
  mountPath: /usr/share/elasticsearch/data
env:
  - name: node.name
    value: "tezca-es"
  - name: cluster.name
    value: "tezca-cluster"
  - name: discovery.type
    value: "single-node"
  - name: bootstrap.memory_lock
    value: "true"
  - name: ES_JAVA_OPTS
    value: "-Xms1g -Xmx1g"
initContainers:
  - name: sysctl
    image: busybox
    command: ["sysctl", "-w", "vm.max_map_count=262144"]
    securityContext:
      privileged: true
